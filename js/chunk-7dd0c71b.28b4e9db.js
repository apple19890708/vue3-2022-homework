(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7dd0c71b"],{3012:function(e,t,o){"use strict";o.r(t);o("a4d3"),o("e01a");var c=o("7a23"),r=Object(c["createElementVNode"])("h2",null,"產品列表",-1),a={class:"container"},i={class:"row row-cols-1 row-cols-lg-4 g-3"},l={class:"card h-100"},n=["onClick"],d={class:"card-body"},s={class:"card-title text-start"},u={class:"card-text text-start"},b={class:"card-footer bg-transparent border-0 d-flex justify-content-between"},m=Object(c["createTextVNode"])(" 看內容 "),f=["onClick","disabled"],h=Object(c["createTextVNode"])(" 加到購物車 ");function v(e,t,o,v,p,O){var g=Object(c["resolveComponent"])("font-awesome-icon"),j=Object(c["resolveComponent"])("router-link"),F=Object(c["resolveComponent"])("FavoriteFilesDialog");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",null,[r,Object(c["createElementVNode"])("div",a,[Object(c["createElementVNode"])("div",i,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(p.products,(function(e,t){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:"col",key:e.id},[Object(c["createElementVNode"])("div",l,[Object(c["createElementVNode"])("div",{class:Object(c["normalizeClass"])(["favorite-mark",{saved:p.products[t].saved}]),onClick:Object(c["withModifiers"])((function(t){return O.saveFavoriteProduct(e)}),["prevent"])},[Object(c["createVNode"])(g,{icon:[p.products[t].saved?"fa":"far","bookmark"],class:"bookmark"},null,8,["icon"])],10,n),e.imageUrl?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:0,style:Object(c["normalizeStyle"])({backgroundImage:"url(".concat(e.imageUrl,")"),height:"300px",backgroundSize:"cover"}),class:"card-img-top primary-image",height:"196"},null,4)):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("div",d,[Object(c["createElementVNode"])("h5",s,Object(c["toDisplayString"])(e.title),1),Object(c["createElementVNode"])("p",u,Object(c["toDisplayString"])(e.description),1)]),Object(c["createElementVNode"])("div",b,[Object(c["createVNode"])(j,{to:"/front-product/".concat(e.id),class:"btn btn-primary"},{default:Object(c["withCtx"])((function(){return[m]})),_:2},1032,["to"]),Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-danger",onClick:function(t){return O.addToCart(e.id)},disabled:p.isLoadingItem===e.id},[Object(c["withDirectives"])(Object(c["createElementVNode"])("span",null,[Object(c["createVNode"])(g,{icon:"spinner",class:"fa-spin"})],512),[[c["vShow"],p.isLoadingItem===e.id]]),h],8,f)])])])})),128))])]),Object(c["createVNode"])(F,{ref:"favoriteFilesDialog",choiceFavoriteProduct:p.favoriteProduct},null,8,["choiceFavoriteProduct"])])}var p=o("1da1"),O=o("5530"),g=(o("d3b7"),o("159b"),o("99af"),o("96cf"),o("5502")),j=function(e){return Object(c["pushScopeId"])("data-v-01a8c936"),e=e(),Object(c["popScopeId"])(),e},F={id:"favoriteFilesDialogs",ref:"favoriteFilesDialog",class:"modal fade",tabindex:"-1","aria-labelledby":"favoriteFilesDialogLabel","aria-hidden":"true"},N={class:"modal-dialog modal-md modal-dialog-centered"},k={class:"modal-content border-0"},V=j((function(){return Object(c["createElementVNode"])("div",{class:"modal-header"},[Object(c["createElementVNode"])("h5",{id:"productModalLabel",class:"modal-title"},[Object(c["createElementVNode"])("span",null,"收藏夾")]),Object(c["createElementVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)})),y={class:"modal-body"},E=Object(c["createTextVNode"])(" 新增資料夾 "),w=["onClick"],C=j((function(){return Object(c["createElementVNode"])("div",{class:"modal-footer"},null,-1)})),S={class:"modal fade",ref:"createFoldersModal",id:"exampleModalToggle2","aria-hidden":"true","aria-labelledby":"exampleModalToggleLabel2",tabindex:"-1"},P={class:"modal-dialog modal-dialog-centered"},x={class:"modal-content"},M=j((function(){return Object(c["createElementVNode"])("div",{class:"modal-header"},[Object(c["createElementVNode"])("h5",{class:"modal-title",id:"exampleModalToggleLabel2"},"新增資料夾"),Object(c["createElementVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)})),B={class:"modal-body"},L=Object(c["createTextVNode"])(" Hide this modal and show the first with the button below. "),D={class:"form__inputBox"},I=j((function(){return Object(c["createElementVNode"])("div",{class:"form__labelBox"},[Object(c["createElementVNode"])("label",{for:"collectForderName",class:"form__label--custom form-label"},"收藏夾名稱"),Object(c["createElementVNode"])("p",{class:"formTag--must"},"必填*")],-1)})),_=j((function(){return Object(c["createElementVNode"])("button",{type:"submit",class:"btn btn-primary w-100 mb-3"}," 建立 ",-1)}));function T(e,t,o,r,a,i){var l=Object(c["resolveComponent"])("font-awesome-icon"),n=Object(c["resolveComponent"])("Field"),d=Object(c["resolveComponent"])("ErrorMessage"),s=Object(c["resolveComponent"])("Form");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",null,[Object(c["createElementVNode"])("div",F,[Object(c["createElementVNode"])("div",N,[Object(c["createElementVNode"])("div",k,[V,Object(c["createElementVNode"])("div",y,[Object(c["createElementVNode"])("div",{onClick:t[0]||(t[0]=function(){return i.addNewFolder&&i.addNewFolder.apply(i,arguments)})},[Object(c["createVNode"])(l,{icon:["fa","plus"],class:"plus"}),E]),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(a.folders,(function(e,t){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:e.id,class:"folder",onClick:function(o){return i.addToFolder(e.id,t)}},Object(c["toDisplayString"])(e.title),9,w)})),128))]),C])])],512),Object(c["createElementVNode"])("div",S,[Object(c["createElementVNode"])("div",P,[Object(c["createElementVNode"])("div",x,[M,Object(c["createElementVNode"])("div",B,[L,Object(c["createVNode"])(s,{ref:"creatFolderForm",onSubmit:i.createFolder},{default:Object(c["withCtx"])((function(e){var o=e.errors;return[Object(c["createElementVNode"])("div",D,[I,Object(c["createVNode"])(n,{id:"collectForderName",ref:"collectForderName",name:"收藏夾名稱",type:"text",class:Object(c["normalizeClass"])(["form-control",{"is-invalid":o["收藏夾名稱"]}]),placeholder:"請輸入收藏夾名稱",modelValue:a.creatFolderForm.title,"onUpdate:modelValue":t[1]||(t[1]=function(e){return a.creatFolderForm.title=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(d,{name:"收藏夾名稱",class:"invalid-feedback"})]),_,Object(c["createElementVNode"])("button",{class:"btn btn-gray-light w-100",onClick:t[2]||(t[2]=function(){return i.backFirst&&i.backFirst.apply(i,arguments)}),type:"button"}," 返回 ")]})),_:1},8,["onSubmit"])])])])],512)])}o("e9c4");var J=o("7c2b"),$=o.n(J),U={name:"FavoriteFilesDialog",props:{choiceFavoriteProduct:{type:Object,default:function(){return{}}}},watch:{choiceFavoriteProduct:function(){this.checkFavoriteFolder(this.choiceFavoriteProduct.id)}},data:function(){return{modal:"",createFolderModal:"",folders:[],copyFolders:[],creatFolderForm:{title:""},createFolderInProduct:!0}},computed:Object(O["a"])({},Object(g["b"])("commonModule",["favoriteFoders"])),methods:{createFolder:function(){var e={title:this.creatFolderForm.title||"未命名收藏夾",productContents:[],id:"".concat(Math.floor(Date.now()/1e3))};if(this.createFolderInProduct){var t={title:this.choiceFavoriteProduct.title,category:this.choiceFavoriteProduct.category,id:this.choiceFavoriteProduct.id,imageUrl:this.choiceFavoriteProduct.imageUrl};e.productContents.push(t)}this.copyFolders.push(e);var o=JSON.stringify(this.copyFolders);localStorage.setItem("favorite-folders",o),this.getLocalStorage(),this.closeModal()},backFirst:function(){this.modal.show(),this.createFolderModal.hide()},addNewFolder:function(){this.modal.hide(),this.creatFolderForm={title:""},this.createFolderModal.show()},openModal:function(){this.modal.show()},closeModal:function(){this.modal.hide(),this.createFolderModal.hide()},addToFolder:function(e,t){var o=this;if(!1===this.folders[t].productCheck){console.log("內無該筆資料，可新增");var c={title:this.choiceFavoriteProduct.title,category:this.choiceFavoriteProduct.category,id:this.choiceFavoriteProduct.id,imageUrl:this.choiceFavoriteProduct.imageUrl};this.copyFolders.forEach((function(t,r){t.id===e&&o.copyFolders[r].productContents.push(c)}))}else console.log("有該筆資料，可刪除");var r=JSON.stringify(this.copyFolders);localStorage.setItem("favorite-folders",r),this.modal.hide(),this.getLocalStorage()},checkFavoriteFolder:function(e){var t=this;this.folders.forEach((function(o,c){var r=o.productContents.some((function(t){return t.id===e}));t.folders[c].productCheck=r,console.log("checkFavoriteFolder",t.folders)}))},getLocalStorage:function(){var e=JSON.parse(localStorage.getItem("favorite-folders"));e&&(this.folders=e,this.copyFolders=JSON.parse(JSON.stringify(e))),this.$store.commit("commonModule/SAVE_FAVORIE_FOLDERS",JSON.parse(JSON.stringify(e)))}},mounted:function(){this.modal=new $.a(this.$refs.favoriteFilesDialog),this.createFolderModal=new $.a(this.$refs.createFoldersModal)},unmounted:function(){this.modal.dispose(),this.createFolderModal.dispose()},created:function(){this.getLocalStorage()}},z=(o("eb93"),o("6b0d")),R=o.n(z);const A=R()(U,[["render",T],["__scopeId","data-v-01a8c936"]]);var q=A,H=o("365c"),G={name:"FrontProducts",components:{FavoriteFilesDialog:q},data:function(){return{products:[],favoriteProduct:{},isLoadingItem:""}},computed:Object(O["a"])({},Object(g["b"])("commonModule",["favoriteFoders"])),watch:{favoriteFoders:function(){this.checkBookingProduct()}},methods:{addToCart:function(e){var t=arguments,o=this;return Object(p["a"])(regeneratorRuntime.mark((function c(){var r,a,i;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return r=t.length>1&&void 0!==t[1]?t[1]:1,c.prev=1,a={product_id:e,qty:r},o.isLoadingItem=e,c.next=6,Object(H["c"])({data:a});case 6:i=c.sent,i&&(o.isLoadingItem="",o.getCart()),c.next=13;break;case 10:c.prev=10,c.t0=c["catch"](1),console.log(c.t0);case 13:case"end":return c.stop()}}),c,null,[[1,10]])})))()},getCart:function(){this.$store.dispatch("commonModule/getCart")},checkBookingProduct:function(){var e=this;this.favoriteFoders&&this.products.forEach((function(t,o){var c=!1;e.favoriteFoders.forEach((function(e){e.productContents.forEach((function(e){t.id===e.id&&(c=!0)}))})),e.products[o].saved=c}))},saveFavoriteProduct:function(e){this.favoriteProduct=e,this.$refs.favoriteFilesDialog.openModal()},getProducts:function(){var e=this;this.$http("".concat("https://vue3-course-api.hexschool.io/","v2/api/").concat("tommy","/products/all")).then((function(t){e.products=t.data.products,e.checkBookingProduct()}))}},mounted:function(){this.getProducts()}};o("a54f");const K=R()(G,[["render",v]]);t["default"]=K},a54f:function(e,t,o){"use strict";o("cb61")},a610:function(e,t,o){},cb61:function(e,t,o){},e01a:function(e,t,o){"use strict";var c=o("23e7"),r=o("83ab"),a=o("da84"),i=o("e330"),l=o("1a2d"),n=o("1626"),d=o("3a9b"),s=o("577e"),u=o("9bf2").f,b=o("e893"),m=a.Symbol,f=m&&m.prototype;if(r&&n(m)&&(!("description"in f)||void 0!==m().description)){var h={},v=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:s(arguments[0]),t=d(f,this)?new m(e):void 0===e?m():m(e);return""===e&&(h[t]=!0),t};b(v,m),v.prototype=f,f.constructor=v;var p="Symbol(test)"==String(m("test")),O=i(f.toString),g=i(f.valueOf),j=/^Symbol\((.*)\)[^)]+$/,F=i("".replace),N=i("".slice);u(f,"description",{configurable:!0,get:function(){var e=g(this),t=O(e);if(l(h,e))return"";var o=p?N(t,7,-1):F(t,j,"$1");return""===o?void 0:o}}),c({global:!0,forced:!0},{Symbol:v})}},eb93:function(e,t,o){"use strict";o("a610")}}]);
//# sourceMappingURL=chunk-7dd0c71b.28b4e9db.js.map